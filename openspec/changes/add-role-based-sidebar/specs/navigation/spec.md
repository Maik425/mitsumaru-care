## ADDED Requirements

### Requirement: ロール別ナビゲーション表示機能

MUST: システムはユーザーのロールに応じて適切なナビゲーションメニューを表示する。

#### Scenario: システム管理者のナビゲーション表示

- **WHEN** システム管理者がログインしてダッシュボードにアクセス
- **THEN** システム管理者専用のメニュー項目が表示される
- **AND** ユーザー管理、施設管理、システム設定、監査ログ、ヘルスチェック、データエクスポート、通知管理のメニューが含まれる

#### Scenario: 施設管理者のナビゲーション表示

- **WHEN** 施設管理者がログインしてダッシュボードにアクセス
- **THEN** 施設管理者専用のメニュー項目が表示される
- **AND** 勤怠管理、シフト管理、職員管理、設定（技能、役職、シフト形態、配置ルール、アカウント）のメニューが含まれる

#### Scenario: 一般ユーザーのナビゲーション表示

- **WHEN** 一般ユーザーがログインしてダッシュボードにアクセス
- **THEN** 一般ユーザー専用のメニュー項目が表示される
- **AND** 勤怠記録、休暇申請、ダッシュボードのメニューが含まれる

### Requirement: 権限ベースメニュー制御機能

MUST: システムはユーザーの権限に基づいてメニュー項目の表示/非表示を制御する。

#### Scenario: 権限のないメニューの非表示

- **WHEN** 一般ユーザーがシステム管理者専用の画面にアクセスしようとする
- **THEN** 該当するメニュー項目が表示されない
- **AND** 直接URLアクセス時は適切なエラーページまたはリダイレクトが実行される

#### Scenario: 権限チェックエラーの処理

- **WHEN** 権限チェック中にエラーが発生する
- **THEN** エラーメッセージが表示される
- **AND** デフォルトのメニュー表示にフォールバックされる

#### Scenario: 権限チェックの動的実行

- **WHEN** ユーザーの権限が変更された場合
- **THEN** メニュー表示が即座に更新される
- **AND** 新しい権限に応じたメニュー項目が表示される

### Requirement: 一貫したサイドバー表示機能

MUST: システムは全画面で一貫したサイドバー表示を提供する。

#### Scenario: 画面遷移時のサイドバー継続表示

- **WHEN** ユーザーが任意の画面から別の画面に遷移する
- **THEN** サイドバーが継続して表示される
- **AND** 現在のページがハイライト表示される

#### Scenario: 認証状態に応じたサイドバー表示

- **WHEN** ユーザーがログイン状態で任意の画面にアクセスする
- **THEN** 認証状態に応じたサイドバーが表示される
- **AND** ログアウト状態ではサイドバーが表示されない

#### Scenario: 認証状態変更時のサイドバー更新

- **WHEN** ユーザーがログインまたはログアウトする
- **THEN** サイドバーが即座に更新される
- **AND** 新しい認証状態に応じたメニューが表示される

### Requirement: レスポンシブナビゲーション機能

MUST: システムはデバイスサイズに応じてナビゲーション表示を最適化する。

#### Scenario: モバイルデバイスでのナビゲーション

- **WHEN** ユーザーがモバイルデバイスでシステムにアクセスする
- **THEN** ハンバーガーメニュー形式でナビゲーションが表示される
- **AND** タップでメニューが開閉できる

#### Scenario: デスクトップデバイスでのナビゲーション

- **WHEN** ユーザーがデスクトップデバイスでシステムにアクセスする
- **THEN** 常時表示されるサイドバー形式でナビゲーションが表示される
- **AND** 各メニュー項目が明確に識別できる
