## 1. データベース設計・実装

- [x] 1.1 職種マスターテーブルの設計・作成
  - [x] 1.1.1 job_typesテーブルの作成（id, name, description, facility_id, is_active）
  - [x] 1.1.2 インデックスと制約の設定
  - [x] 1.1.3 RLSポリシーの設定
- [x] 1.2 エリアマスターテーブルの設計・作成
  - [x] 1.2.1 areasテーブルの作成（id, name, description, facility_id, is_active）
  - [x] 1.2.2 インデックスと制約の設定
  - [x] 1.2.3 RLSポリシーの設定
- [x] 1.3 配置ルールテンプレートテーブルの設計・作成
  - [x] 1.3.1 job_rule_templatesテーブルの作成（id, name, description, facility_id, is_active）
  - [x] 1.3.2 インデックスと制約の設定
  - [x] 1.3.3 RLSポリシーの設定
- [x] 1.4 配置ルールセットテーブルの設計・作成
  - [x] 1.4.1 job_rule_setsテーブルの作成（template_id, job_type_id, area_id, min_assignment, max_assignment）
  - [x] 1.4.2 外部キー制約の設定
  - [x] 1.4.3 RLSポリシーの設定
- [x] 1.5 マイグレーションファイルの作成・実行
- [x] 1.6 ダミーデータの挿入

## 2. バックエンド実装

- [x] 2.1 配置ルールDTOの作成
  - [x] 2.1.1 JobType型定義の作成
  - [x] 2.1.2 Area型定義の作成
  - [x] 2.1.3 JobRuleTemplate型定義の作成
  - [x] 2.1.4 JobRuleSet型定義の作成
  - [x] 2.1.5 リクエスト・レスポンス型の定義
- [x] 2.2 配置ルールリポジトリの実装
  - [x] 2.2.1 JobRulesRepositoryクラスの作成
  - [x] 2.2.2 職種CRUD操作の実装
  - [x] 2.2.3 エリアCRUD操作の実装
  - [x] 2.2.4 配置ルールテンプレートCRUD操作の実装
  - [x] 2.2.5 配置ルールセット管理メソッドの実装
- [x] 2.3 tRPCルーターの実装
  - [x] 2.3.1 職種管理ルーター（job-types.ts）
    - [x] 2.3.1.1 職種一覧取得（list）
    - [x] 2.3.1.2 職種作成（create）
    - [x] 2.3.1.3 職種更新（update）
    - [x] 2.3.1.4 職種削除（delete）
  - [x] 2.3.2 エリア管理ルーター（areas.ts）
    - [x] 2.3.2.1 エリア一覧取得（list）
    - [x] 2.3.2.2 エリア作成（create）
    - [x] 2.3.2.3 エリア更新（update）
    - [x] 2.3.2.4 エリア削除（delete）
  - [x] 2.3.3 配置ルール管理ルーター（job-rules.ts）
    - [x] 2.3.3.1 配置ルールテンプレート一覧取得（list）
    - [x] 2.3.3.2 配置ルールテンプレート作成（create）
    - [x] 2.3.3.3 配置ルールテンプレート更新（update）
    - [x] 2.3.3.4 配置ルールテンプレート削除（delete）
    - [x] 2.3.3.5 配置ルール適用（apply）

## 3. フロントエンド実装

- [x] 3.1 配置ルールテンプレート管理コンポーネントの修正
  - [x] 3.1.1 tRPCクライアントの統合
  - [x] 3.1.2 職種・エリアマスターの取得・表示
  - [x] 3.1.3 配置ルールテンプレート一覧の取得・表示
  - [x] 3.1.4 配置ルールテンプレート作成フォームの実装
  - [x] 3.1.5 配置ルールテンプレート編集機能の実装
  - [x] 3.1.6 配置ルールテンプレート削除機能の実装
  - [x] 3.1.7 職種・エリアマスター管理機能の実装
- [ ] 3.2 シフト作成フォームの修正
  - [ ] 3.2.1 配置ルールテンプレート選択の動的化（APIから取得）
  - [ ] 3.2.2 配置ルール適用機能の実装
  - [ ] 3.2.3 職員配置の自動提案機能
- [ ] 3.3 シフト編集フォームの修正
  - [ ] 3.3.1 配置ルールテンプレート選択の動的化
  - [ ] 3.3.2 既存シフトデータとの整合性確保
  - [ ] 3.3.3 配置ルール適用機能の実装
- [ ] 3.4 役割表管理システムの修正
  - [ ] 3.4.1 配置ルールテンプレートとの連携
  - [ ] 3.4.2 職種・エリア別の職員配置機能
  - [ ] 3.4.3 配置ルールに基づく自動配置機能
- [ ] 3.5 施設別管理機能の実装
  - [ ] 3.5.1 施設管理者の所属施設取得
  - [ ] 3.5.2 施設別配置ルールフィルタリング
- [ ] 3.6 エラーハンドリングとローディング状態の実装
- [ ] 3.7 バリデーション機能の実装

## 4. 配置ルール適用機能

- [ ] 4.1 配置ルール適用ロジックの実装
- [ ] 4.2 職員配置の自動提案機能
- [ ] 4.3 配置ルール違反の検出・警告機能
- [ ] 4.4 配置ルール適用結果の表示機能

## 5. セキュリティ・権限管理

- [ ] 5.1 RLSポリシーの確認・調整
- [ ] 5.2 施設管理者の権限チェック実装
- [ ] 5.3 システム管理者の全施設管理権限実装

## 6. 統合・連携

- [ ] 6.1 既存シフトデータとの整合性確認
- [ ] 6.2 役割表管理との連携テスト
- [ ] 6.3 シフト作成・編集機能との統合テスト

## 7. テスト・検証

- [ ] 7.1 データベーススキーマのテスト
- [ ] 7.2 API動作テスト
- [ ] 7.3 フロントエンド動作テスト
- [ ] 7.4 配置ルール適用機能のテスト
- [ ] 7.5 権限テスト（施設管理者・システム管理者）
- [x] 7.6 TypeScript型チェック（`pnpm exec tsc`）
